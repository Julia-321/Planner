{% extends 'base.html' %}
{% block title %}
    Daily tasks
{% endblock %}

{% block content %}

    {% include 'tasks/nav_tasks.html' %}
    {% include 'tasks/nav_dates.html' %}


    <h3>Monthly tasks</h3>

    <div>
        <a href="/tasks/add"> Add a new task </a>

    </div>

    <div class="container">
        <div class="accordion accordion-flush" id="accordionFlushExample">
            {% for task in tasks %}
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-heading{{ task.id }}">

                            <div>
                                <div><b>{{ task.name }}</b></div>
                                <div>{{ task.deadline }}</div>
                                <div>
                                    <a href="/tasks/edit/?id={{ task.id }}">edit</a>
                                    <a href="/tasks/delete/?id={{ task.id }}">delete</a>

                                </div>
                                <form method="post" action='{% url 'list_view' year=date.year month=date.month day=date.day %}'>

                                    {% csrf_token %}

                                    <input type="hidden" name="cur" value="{{ checked }}">
                                    <input type="hidden" name="complete_id" value="{{ task.id }}">
                                {% if not task.complete %}


                                    <button type="submit" class="btn btn-secondary" name="incomplete">Incomplete</button>


                                {% else %}

                                    <button type="submit" class="btn btn-success" name="complete"> Complete </button>


                                {% endif %}

                                </form>
                            </div>
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#flush-collapse{{ task.id }}" aria-expanded="false"
                                aria-controls="flush-collapse{{ task.id }}">
                        </button>
                    </h2>
                    <div id="flush-collapse{{ task.id }}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{ task.id }}"
                         data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body"> &nbsp;&nbsp;&nbsp;&nbsp; {{ task.description }} </div>

                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}